<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital History Adventures</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: radial-gradient(ellipse at bottom right, #6666ff 0%, #3333ff 30%, #0d00ff 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #ffffff;
            margin: 0;
            padding: 20px;
            transition: background 1s ease-in-out;
        }

        /* Historical Background Options */
        body.bg-colonial {
            background: linear-gradient(135deg, #654321 0%, #5D4037 50%, #4E342E 100%) !important;
        }

        body.bg-civilwar {
            background: 
                radial-gradient(circle at 30% 70%, rgba(70, 70, 70, 0.4) 0%, transparent 60%),
                radial-gradient(circle at 70% 30%, rgba(47, 79, 79, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #2F4F4F 0%, #1a1a2e 50%, #16213e 100%) !important;
        }

        body.bg-space {
            background: 
                radial-gradient(ellipse at 40% 20%, rgba(65, 105, 225, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #000000 0%, #0a0a0a 50%, #1a1a2e 100%) !important;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #e3f2fd;
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }
        
        .scene-image {
            font-size: 6rem;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .scene-image img {
            width: 480px;
            height: 270px;
            object-fit: cover;
            border-radius: 15px;
        }
        
        .scene-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .scene-text {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .name-section {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .name-section input {
            padding: 12px 20px;
            font-size: 1.1rem;
            border: 2px solid #a855f7;
            border-radius: 8px;
            width: 250px;
            max-width: 100%;
            margin-bottom: 15px;
        }
        
        .start-button {
            background: linear-gradient(90deg, #9333ea 0%, #e11d48 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            display: inline-block;
        }
        
        .choices {
            margin-bottom: 20px;
        }
        
        .choice-button {
            display: block;
            width: 100%;
            background: linear-gradient(90deg, #9333ea 0%, #e11d48 100%);
            color: white;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .choice-button:hover {
            transform: scale(1.02);
        }
        
        .victory-section {
            background: linear-gradient(45deg, #059669, #0891b2);
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .victory-section h3 {
            color: #ecfdf5;
            margin: 0 0 10px 0;
            font-size: 1.3rem;
        }

        .course-details-section {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            white-space: pre-line;
            font-family: monospace;
            font-size: 1rem;
            line-height: 1.6;
        }

        .historical-note {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .historical-note h3 {
            margin: 0 0 10px 0;
            color: #fcd34d;
        }
        
        .action-buttons {
            text-align: center;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .btn-restart { background: #475569; color: white; }
        .btn-course { background: #059669; color: white; }
        .btn-editor { background: #ea580c; color: white; }
        
        .course-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }
        
        .course-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .feature {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .feature-icon {
            font-size: 2rem;
            display: block;
            margin-bottom: 10px;
        }
        
        .course-content {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }
        
        .course-list {
            list-style: none;
            padding: 0;
        }
        
        .course-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .course-list li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #a855f7;
            font-weight: bold;
        }
        
        .admin-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .admin-title {
            font-size: 1.8rem;
            margin: 0;
        }
        
        .btn-close {
            background: #dc2626;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .scene-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .scene-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        
        .scene-card h4 {
            margin: 0;
            font-size: 1rem;
            flex: 1;
            margin-right: 10px;
        }
        
        .scene-card-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .scene-card-icon img {
            width: 64px;
            height: 36px;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .scene-preview {
            color: #d1d5db;
            font-size: 0.85rem;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .scene-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .scene-meta {
            font-size: 0.75rem;
            color: #9ca3af;
        }
        
        .btn-edit {
            background: #9333ea;
            color: white;
            padding: 4px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .edit-form {
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: white;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #4b5563;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 0.9rem;
            box-sizing: border-box;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .btn-save {
            background: #059669;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .btn-cancel {
            background: #6b7280;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .password-dialog {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            min-width: 300px;
        }

        .password-dialog h3 {
            margin: 0 0 20px 0;
            color: white;
        }

        .password-dialog input {
            width: 200px;
            padding: 10px;
            border: 1px solid #4b5563;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            margin-bottom: 20px;
            text-align: center;
        }

        .password-dialog button {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 600px) {
            .title { font-size: 2rem; }
            .game-card { padding: 20px; }
            .name-section input { width: 100%; }
            .scene-image img {
                width: 420px;
                height: 237px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title" id="mainTitle">Digital History Adventures</h1>
            <p class="subtitle" id="mainSubtitle">Experience pivotal moments in American history through interactive storytelling</p>
        </div>

        <div class="game-card">
            <div class="scene-image" id="sceneImage">🏛️</div>
            <h2 class="scene-title" id="sceneTitle">Welcome to Digital History!</h2>
            <div class="scene-text" id="sceneText">
                Step into the shoes of historical figures and experience pivotal moments in American history. What's your name, time traveler?
            </div>

            <!-- Name Input Section -->
            <div class="name-section" id="nameSection">
                <input type="text" id="playerName" placeholder="Enter your name..." maxlength="20">
                <br>
                <button class="start-button" onclick="startGame()" id="startButton">Begin Your Journey</button>
            </div>

            <!-- Choices Section -->
            <div class="choices" id="choicesSection"></div>

            <!-- Victory Section -->
            <div class="victory-section hidden" id="victorySection">
                <h3 id="victoryTitle">🎉 Mission Accomplished!</h3>
                <p id="victoryText">You've demonstrated the analytical thinking skills central to our Digital History course!</p>
            </div>

            <!-- Course Details Section -->
            <div class="course-details-section hidden" id="courseDetailsSection"></div>

            <!-- Historical Note Section -->
            <div class="historical-note hidden" id="historicalNote">
                <h3 id="historicalContextTitle">📖 Historical Context</h3>
                <p id="historicalText"></p>
            </div>

            <!-- Citations Section -->
            <div class="historical-note hidden" id="citationsSection" style="background: rgba(34, 139, 34, 0.2); border: 1px solid rgba(34, 139, 34, 0.5);">
                <h3 style="color: #90ee90;">📚 Sources & Citations</h3>
                <p id="citationsText">Historical information compiled from multiple academic sources including National Archives, Library of Congress, and peer-reviewed historical journals.</p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-restart" onclick="resetGame()" id="restartButton">↻ Restart</button>
                <button class="btn btn-course" onclick="toggleCourseInfo()" id="courseInfoButton">📖 Course Info</button>
                <button class="btn btn-editor" onclick="toggleAdmin()" id="editorButton">⚙️ Content Editor</button>
            </div>
        </div>

        <!-- Course Info Panel -->
        <div class="course-info hidden" id="courseInfo">
            <h2 class="course-title">🎓 Digital History Course</h2>
            
            <div class="features">
                <div class="feature">
                    <span class="feature-icon">🕰</span>
                    <h3>Interactive Learning</h3>
                    <p>Engage with history through immersive digital experiences</p>
                </div>
                <div class="feature">
                    <span class="feature-icon">👥</span>
                    <h3>Collaborative Research</h3>
                    <p>Work together on digital history projects and presentations</p>
                </div>
                <div class="feature">
                    <span class="feature-icon">📖</span>
                    <h3>Critical Thinking</h3>
                    <p>Analyze historical sources and understand cause-and-effect relationships</p>
                </div>
            </div>

            <div class="course-content">
                <h3>What You'll Experience:</h3>
                <ul class="course-list">
                    <li>Interactive historical simulations and decision-making scenarios</li>
                    <li>Digital archive research and primary source analysis</li>
                    <li>Multimedia storytelling and historical narrative creation</li>
                    <li>Understanding how technology shapes our interpretation of the past</li>
                </ul>
                
                <div style="text-align: center; margin-top: 20px;">
                    <p style="font-size: 1.2rem; color: #c084fc; font-weight: bold;">Ready to explore history in a whole new way?</p>
                    <p style="color: #d1d5db;">This adventure was just a small taste of what awaits in our Digital History course!</p>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div class="admin-panel hidden" id="adminPanel">
            <div class="admin-header">
                <h2 class="admin-title">⚙️ Content Editor</h2>
                <div>
                    <button class="btn-cancel" onclick="lockEditor()" style="margin-right: 10px;">🔒 Lock Editor</button>
                    <button class="btn-close" onclick="toggleAdmin()">Close Editor</button>
                </div>
            </div>
            
            <p style="color: #d1d5db; margin-bottom: 20px;">
                Edit scenes and interface labels. Changes are saved locally in your browser.
            </p>
            
            <!-- Tab buttons -->
            <div style="margin-bottom: 20px; text-align: center;">
                <button class="btn btn-editor" onclick="showSceneEditor()" id="sceneTabBtn" style="margin-right: 10px;">Scenes</button>
                <button class="btn btn-course" onclick="showLabelEditor()" id="labelTabBtn">Labels</button>
            </div>
            
            <!-- Scene Editor -->
            <div id="sceneEditor">
                <div class="scene-grid" id="sceneGrid"></div>
                
                <div class="edit-form hidden" id="editForm">
                    <h3 style="margin-top: 0;">Editing Scene: <span id="editingSceneName"></span></h3>
                    
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" id="editTitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Image (Emoji or URL):</label>
                        <input type="text" id="editImage" placeholder="🏛️ or https://example.com/image.jpg">
                    </div>
                    
                    <div class="form-group">
                        <label>Scene Text:</label>
                        <textarea id="editText" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group hidden" id="historicalNoteGroup">
                        <label>Historical Note:</label>
                        <textarea id="editHistoricalNote" rows="3"></textarea>
                    </div>
                    
                    <!-- Choice buttons editor -->
                    <div class="form-group hidden" id="choicesGroup">
                        <label>Choice Buttons:</label>
                        <div id="choicesEditor"></div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn-save" onclick="saveScene()">💾 Save Changes</button>
                        <button class="btn-cancel" onclick="cancelEdit()">Cancel</button>
                    </div>
                </div>
            </div>
            
            <!-- Label Editor -->
            <div id="labelEditor" class="hidden">
                <div class="edit-form">
                    <h3 style="margin-top: 0;">Edit Interface Labels</h3>
                    
                    <div class="form-group">
                        <label>Main Title:</label>
                        <input type="text" id="editMainTitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Main Subtitle:</label>
                        <input type="text" id="editMainSubtitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Start Button Text:</label>
                        <input type="text" id="editStartButton">
                    </div>
                    
                    <div class="form-group">
                        <label>Restart Button Text:</label>
                        <input type="text" id="editRestartButton">
                    </div>
                    
                    <div class="form-group">
                        <label>Course Info Button Text:</label>
                        <input type="text" id="editCourseInfoButton">
                    </div>
                    
                    <div class="form-group">
                        <label>Editor Button Text:</label>
                        <input type="text" id="editEditorButton">
                    </div>
                    
                    <div class="form-group">
                        <label>Victory Title:</label>
                        <input type="text" id="editVictoryTitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Victory Text:</label>
                        <textarea id="editVictoryText" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Historical Context Title:</label>
                        <input type="text" id="editHistoricalContextTitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Citations Title:</label>
                        <input type="text" id="editCitationsTitle">
                    </div>
                    
                    <div class="form-group">
                        <label>Citations Text:</label>
                        <textarea id="editCitationsText" rows="3"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn-save" onclick="saveLabels()">💾 Save Labels</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Modal -->
        <div class="password-modal hidden" id="passwordModal">
            <div class="password-dialog">
                <h3>Content Editor Access</h3>
                <p style="color: #d1d5db; margin-bottom: 20px;">Enter password to access editing tools:</p>
                <input type="password" id="passwordInput" placeholder="Password">
                <br>
                <button class="btn-save" onclick="checkPassword()">Submit</button>
                <button class="btn-cancel" onclick="closePasswordModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Game state variables
        let currentScene = 'start';
        let playerName = '';
        let editingScene = null;
        let editorUnlocked = false;
        const editorPassword = 'admin123'; // Change this to your desired password

        // Editable labels/interface text
        const gameLabels = {
            mainTitle: "Digital History Adventures",
            mainSubtitle: "Experience pivotal moments in American history through interactive storytelling",
            namePrompt: "What's your name, time traveler?",
            namePlaceholder: "Enter your name...",
            startButton: "Begin Your Journey",
            restartButton: "↻ Restart",
            courseInfoButton: "📖 Course Info",
            editorButton: "⚙️ Content Editor",
            victoryTitle: "🎉 Mission Accomplished!",
            victoryText: "You've demonstrated the analytical thinking skills central to our Digital History course!",
            historicalContextTitle: "📖 Historical Context",
            citationsTitle: "📚 Sources & Citations",
            citationsText: "Historical information compiled from multiple academic sources including National Archives, Library of Congress, and peer-reviewed historical journals."
        };

        // Game scenes data
        const scenes = {
            start: {
                title: "Welcome to Digital History!",
                image: "🏛️",
                text: "Step into the shoes of historical figures and experience pivotal moments in American history. What's your name, time traveler?",
                isNameInput: true
            },
            
            timePortal: {
                title: "The Time Portal Awaits",
                image: "🌀",
                text: "Ready, {playerName}? You stand before a swirling portal of time. Three critical moments in American history beckon. Each choice will test your understanding of historical context and consequences.",
                choices: [
                    { text: "1776 - Revolutionary War", action: "revolution" },
                    { text: "1863 - Civil War", action: "civilwar" },
                    { text: "1969 - Moon Landing", action: "moonlanding" }
                ]
            },
            
            revolution: {
                title: "Valley Forge, Winter 1777-1778",
                image: "❄️",
                text: "You are a Continental Army soldier under General Washington. The winter is brutal, supplies are scarce, and morale is at its lowest. Many soldiers are deserting. What do you do?",
                choices: [
                    { text: "Stay and endure the hardship for the cause", action: "revolutionStay" },
                    { text: "Desert and return home to your family", action: "revolutionLeave" },
                    { text: "Try to rally other soldiers with speeches", action: "revolutionRally" }
                ]
            },
            
            revolutionStay: {
                title: "The Patriot's Resolve",
                image: "🇺🇸",
                text: "Your decision to stay proved crucial. Though 2,500 soldiers died that winter, the army that emerged was disciplined and united. Your sacrifice contributed to eventual victory at Yorktown. Historical impact: HIGH",
                isEnding: true,
                historicalNote: "About 2,000 soldiers deserted Valley Forge, but those who stayed formed the backbone of Washington's eventual victory.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            revolutionLeave: {
                title: "The Deserter's Dilemma",
                image: "🏠",
                text: "You return home safely, but news reaches you of the army's transformation at Valley Forge. Many who stayed became heroes of independence. You live with wondering 'what if?' Historical impact: LOW",
                isEnding: true,
                historicalNote: "Desertion was common and understandable, but those who endured Valley Forge became the core of America's victory.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            revolutionRally: {
                title: "The Inspirational Leader",
                image: "📜",
                text: "Your speeches help maintain morale during the darkest hours. You become a sergeant and help train new recruits using Baron von Steuben's methods. Your leadership saves lives and wins battles. Historical impact: HIGH",
                isEnding: true,
                historicalNote: "Leadership at all levels was crucial to the Continental Army's survival and eventual professionalization.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            civilwar: {
                title: "Gettysburg, July 2, 1863",
                image: "⚔️",
                text: "You are a Union officer watching Confederate forces position for Pickett's Charge. You have intelligence that could change the battle's outcome. General Meade is nearby. What do you do?",
                choices: [
                    { text: "Immediately inform General Meade", action: "civilwarInform" },
                    { text: "Position your troops defensively first", action: "civilwarDefend" },
                    { text: "Send scouts to confirm the intelligence", action: "civilwarScout" }
                ]
            },
            
            civilwarInform: {
                title: "The Strategic Mind",
                image: "🎖️",
                text: "Your quick thinking allows Meade to better position artillery and infantry. Pickett's Charge fails more decisively, shortening the war by months and saving thousands of lives. Historical impact: HIGH",
                isEnding: true,
                historicalNote: "Quick decision-making and intelligence sharing were often the difference between victory and defeat in Civil War battles.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            civilwarDefend: {
                title: "The Tactical Officer",
                image: "🛡️",
                text: "Your defensive preparations save your regiment, but the delayed intelligence prevents optimal positioning. The battle is won, but at a higher cost in lives. Historical impact: MEDIUM",
                isEnding: true,
                historicalNote: "Balancing immediate unit safety with strategic needs was a constant challenge for Civil War officers.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            civilwarScout: {
                title: "The Cautious Commander",
                image: "🔍",
                text: "Your scouts confirm the intelligence, but precious time is lost. The battle unfolds as historically recorded. Your caution saved you from potential error but missed an opportunity. Historical impact: LOW",
                isEnding: true,
                historicalNote: "The fog of war often forced commanders to act on incomplete information, making boldness sometimes more valuable than caution.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            moonlanding: {
                title: "Mission Control, July 20, 1969",
                image: "🚀",
                text: "You're a NASA engineer monitoring Apollo 11's descent. The computer is overloaded with alarms, fuel is running dangerously low, and Neil Armstrong must land manually. What's your advice?",
                choices: [
                    { text: "Recommend immediate abort", action: "moonAbort" },
                    { text: "Trust Armstrong's piloting skills", action: "moonTrust" },
                    { text: "Guide him to the nearest safe spot", action: "moonGuide" }
                ]
            },
            
            moonAbort: {
                title: "The Safety Protocol",
                image: "⚠️",
                text: "You follow safety protocols, but Armstrong continues the landing anyway. The mission succeeds, but your overcaution is noted. Sometimes historical moments require calculated risks. Historical impact: LOW",
                isEnding: true,
                historicalNote: "The actual mission controllers chose to trust Armstrong's skills, leading to the historic landing with just 25 seconds of fuel remaining.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            moonTrust: {
                title: "The Leap of Faith",
                image: "🌙",
                text: "Your confidence in Armstrong proves correct. He lands with seconds to spare, achieving humanity's greatest adventure. Your trust in human skill over caution helped make history. Historical impact: HIGH",
                isEnding: true,
                historicalNote: "Mission Control's trust in Armstrong's abilities was crucial to the successful landing that captivated the world.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },
            
            moonGuide: {
                title: "The Navigator",
                image: "🧭",
                text: "Your guidance helps Armstrong find a safe landing spot, but the drama and achievement feel diminished by over-management. Sometimes heroes need space to make history. Historical impact: MEDIUM",
                isEnding: true,
                historicalNote: "The balance between support and independence was crucial in allowing Armstrong to make split-second decisions that ensured success.",
                choices: [
                    { text: "Continue Your Journey Through Time", action: "victory" }
                ]
            },

            victory: {
                title: "Congratulations, Time Traveler!",
                image: "🎓",
                text: "You've successfully navigated a pivotal moment in American history! Your decisions demonstrate the critical thinking skills we'll develop throughout our Digital History course. Ready to dive deeper into the past and discover how technology transforms our understanding of historical events?",
                isVictory: true,
                choices: [
                    { text: "Explore Another Time Period", action: "timePortal" },
                    { text: "Learn About Our Course", action: "courseDetails" }
                ]
            },

            courseDetails: {
                title: "Digital History Course - Fall 2024",
                image: "📚",
                text: "Course: HIST 285 - Digital History\nInstructor: [Your Name]\nMeeting Times: [Days/Times]\nLocation: [Room/Building]\n\nThis interactive experience you just completed represents the kind of engaging, hands-on learning you'll experience throughout our semester. Join us as we explore how digital tools and critical thinking combine to bring history to life!\n\nContact: [email@university.edu]\nOffice Hours: [Times and Location]",
                isCourseDetails: true,
                choices: [
                    { text: "Try Another Historical Scenario", action: "timePortal" },
                    { text: "Return to Beginning", action: "start" }
                ]
            }
        };

        // Core game functions
        function updateScene() {
            const scene = scenes[currentScene];
            if (!scene) return;

            // Update background based on scene
            updateBackground();

            // Update image
            const imageEl = document.getElementById('sceneImage');
            if (scene.image && (scene.image.startsWith('http') || scene.image.startsWith('data:'))) {
                imageEl.innerHTML = `<img src="${scene.image}" alt="${scene.title}">`;
            } else {
                imageEl.textContent = scene.image;
            }

            // Update title
            document.getElementById('sceneTitle').textContent = scene.title;

            // Update text with player name replacement
            let text = scene.text;
            if (text.includes('{playerName}')) {
                text = text.replace('{playerName}', playerName);
            }
            document.getElementById('sceneText').textContent = text;

            // Show/hide scene text section (hide on start page)
            const sceneTextEl = document.getElementById('sceneText');
            if (currentScene === 'start') {
                sceneTextEl.style.display = 'none';
            } else {
                sceneTextEl.style.display = 'block';
            }

            // Show/hide name input section
            const nameSection = document.getElementById('nameSection');
            if (scene.isNameInput) {
                nameSection.classList.remove('hidden');
            } else {
                nameSection.classList.add('hidden');
            }

            // Update choices section
            const choicesSection = document.getElementById('choicesSection');
            choicesSection.innerHTML = '';
            if (scene.choices && !scene.isNameInput) {
                scene.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.className = 'choice-button';
                    button.textContent = choice.text;
                    button.onclick = () => goToScene(choice.action);
                    choicesSection.appendChild(button);
                });
            }

            // Show/hide victory section
            const victorySection = document.getElementById('victorySection');
            if (scene.isVictory) {
                victorySection.classList.remove('hidden');
            } else {
                victorySection.classList.add('hidden');
            }

            // Show/hide course details section
            const courseDetailsSection = document.getElementById('courseDetailsSection');
            if (scene.isCourseDetails) {
                courseDetailsSection.classList.remove('hidden');
                courseDetailsSection.textContent = scene.text;
            } else {
                courseDetailsSection.classList.add('hidden');
            }

            // Show/hide historical note
            const noteEl = document.getElementById('historicalNote');
            const noteText = document.getElementById('historicalText');
            if (scene.historicalNote) {
                noteText.textContent = scene.historicalNote;
                noteEl.classList.remove('hidden');
            } else {
                noteEl.classList.add('hidden');
            }

            // Show/hide citations section (hide on start page)
            const citationsEl = document.getElementById('citationsSection');
            if (currentScene === 'start') {
                citationsEl.classList.add('hidden');
            } else {
                citationsEl.classList.remove('hidden');
            }
        }

        function updateBackground() {
            // Remove all background classes
            document.body.classList.remove('bg-colonial', 'bg-civilwar', 'bg-space');
            
            // Set background based on current scene
            if (currentScene.includes('revolution')) {
                document.body.classList.add('bg-colonial');
            } else if (currentScene.includes('civilwar')) {
                document.body.classList.add('bg-civilwar');
            } else if (currentScene.includes('moon')) {
                document.body.classList.add('bg-space');
            }
        }

        function goToScene(sceneId) {
            currentScene = sceneId;
            updateScene();
        }

        function startGame() {
            const nameInput = document.getElementById('playerName');
            playerName = nameInput.value.trim();
            if (playerName) {
                goToScene('timePortal');
            } else {
                alert('Please enter your name to begin!');
                nameInput.focus();
            }
        }

        function resetGame() {
            currentScene = 'start';
            playerName = '';
            document.getElementById('playerName').value = '';
            updateScene();
            
            // Hide other panels
            document.getElementById('courseInfo').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            cancelEdit();
        }

        // UI toggle functions
        function toggleCourseInfo() {
            const courseInfo = document.getElementById('courseInfo');
            if (courseInfo.classList.contains('hidden')) {
                courseInfo.classList.remove('hidden');
                // Hide admin panel if open
                document.getElementById('adminPanel').classList.add('hidden');
                cancelEdit();
            } else {
                courseInfo.classList.add('hidden');
            }
        }

        function toggleAdmin() {
            const adminPanel = document.getElementById('adminPanel');
            
            if (adminPanel.classList.contains('hidden')) {
                // Check if editor is already unlocked
                if (editorUnlocked) {
                    openAdminPanel();
                } else {
                    // Show password modal
                    showPasswordModal();
                }
            } else {
                adminPanel.classList.add('hidden');
                cancelEdit();
            }
        }

        function showPasswordModal() {
            document.getElementById('passwordModal').classList.remove('hidden');
            document.getElementById('passwordInput').focus();
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').classList.add('hidden');
            document.getElementById('passwordInput').value = '';
        }

        function checkPassword() {
            const enteredPassword = document.getElementById('passwordInput').value;
            if (enteredPassword === editorPassword) {
                editorUnlocked = true;
                closePasswordModal();
                openAdminPanel();
                alert('Access granted!');
            } else {
                alert('Incorrect password. Access denied.');
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }

        function openAdminPanel() {
            const adminPanel = document.getElementById('adminPanel');
            adminPanel.classList.remove('hidden');
            showSceneEditor(); // Default to scene editor
            // Hide course info if open
            document.getElementById('courseInfo').classList.add('hidden');
        }

        function showSceneEditor() {
            document.getElementById('sceneEditor').classList.remove('hidden');
            document.getElementById('labelEditor').classList.add('hidden');
            document.getElementById('sceneTabBtn').style.background = '#ea580c';
            document.getElementById('labelTabBtn').style.background = '#059669';
            renderSceneGrid();
            cancelEdit();
        }

        function showLabelEditor() {
            document.getElementById('sceneEditor').classList.add('hidden');
            document.getElementById('labelEditor').classList.remove('hidden');
            document.getElementById('sceneTabBtn').style.background = '#059669';
            document.getElementById('labelTabBtn').style.background = '#ea580c';
            loadLabelsForEditing();
            cancelEdit();
        }

        function loadLabelsForEditing() {
            document.getElementById('editMainTitle').value = gameLabels.mainTitle;
            document.getElementById('editMainSubtitle').value = gameLabels.mainSubtitle;
            document.getElementById('editStartButton').value = gameLabels.startButton;
            document.getElementById('editRestartButton').value = gameLabels.restartButton;
            document.getElementById('editCourseInfoButton').value = gameLabels.courseInfoButton;
            document.getElementById('editEditorButton').value = gameLabels.editorButton;
            document.getElementById('editVictoryTitle').value = gameLabels.victoryTitle;
            document.getElementById('editVictoryText').value = gameLabels.victoryText;
            document.getElementById('editHistoricalContextTitle').value = gameLabels.historicalContextTitle;
            document.getElementById('editCitationsTitle').value = gameLabels.citationsTitle;
            document.getElementById('editCitationsText').value = gameLabels.citationsText;
        }

        function saveLabels() {
            // Update gameLabels object
            gameLabels.mainTitle = document.getElementById('editMainTitle').value.trim();
            gameLabels.mainSubtitle = document.getElementById('editMainSubtitle').value.trim();
            gameLabels.startButton = document.getElementById('editStartButton').value.trim();
            gameLabels.restartButton = document.getElementById('editRestartButton').value.trim();
            gameLabels.courseInfoButton = document.getElementById('editCourseInfoButton').value.trim();
            gameLabels.editorButton = document.getElementById('editEditorButton').value.trim();
            gameLabels.victoryTitle = document.getElementById('editVictoryTitle').value.trim();
            gameLabels.victoryText = document.getElementById('editVictoryText').value.trim();
            gameLabels.historicalContextTitle = document.getElementById('editHistoricalContextTitle').value.trim();
            gameLabels.citationsTitle = document.getElementById('editCitationsTitle').value.trim();
            gameLabels.citationsText = document.getElementById('editCitationsText').value.trim();

            // Update the actual interface elements
            updateInterfaceLabels();
            
            alert('Labels updated successfully!');
        }

        function lockEditor() {
            editorUnlocked = false;
            toggleAdmin(); // This will close the panel since editorUnlocked is now false
            alert('Editor locked. Password will be required for next access.');
        }

        function updateInterfaceLabels() {
            document.getElementById('mainTitle').textContent = gameLabels.mainTitle;
            document.getElementById('mainSubtitle').textContent = gameLabels.mainSubtitle;
            document.getElementById('startButton').textContent = gameLabels.startButton;
            document.getElementById('restartButton').textContent = gameLabels.restartButton;
            document.getElementById('courseInfoButton').textContent = gameLabels.courseInfoButton;
            document.getElementById('editorButton').textContent = gameLabels.editorButton;
            document.getElementById('victoryTitle').textContent = gameLabels.victoryTitle;
            document.getElementById('victoryText').textContent = gameLabels.victoryText;
            document.getElementById('historicalContextTitle').textContent = gameLabels.historicalContextTitle;
            document.getElementById('playerName').placeholder = gameLabels.namePlaceholder;
            
            // Update citations
            const citationsSection = document.querySelector('#citationsSection h3');
            const citationsText = document.getElementById('citationsText');
            if (citationsSection && citationsText) {
                citationsSection.textContent = gameLabels.citationsTitle;
                citationsText.textContent = gameLabels.citationsText;
            }
        }

        // Admin functions
        function renderSceneGrid() {
            const grid = document.getElementById('sceneGrid');
            grid.innerHTML = '';
            
            Object.entries(scenes).forEach(([sceneId, scene]) => {
                const card = document.createElement('div');
                card.className = 'scene-card';
                
                const imageHtml = scene.image && (scene.image.startsWith('http') || scene.image.startsWith('data:')) 
                    ? `<img src="${scene.image}" alt="${scene.title}">`
                    : scene.image;
                
                card.innerHTML = `
                    <div class="scene-card-header">
                        <h4>${scene.title}</h4>
                        <div class="scene-card-icon">${imageHtml}</div>
                    </div>
                    <p class="scene-preview">${scene.text.substring(0, 100)}...</p>
                    <div class="scene-card-footer">
                        <span class="scene-meta">${scene.choices ? scene.choices.length + ' choices' : scene.isVictory ? 'Victory page' : scene.isCourseDetails ? 'Course details' : 'Ending scene'}</span>
                        <button class="btn-edit" onclick="editScene('${sceneId}')">✏️ Edit</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function editScene(sceneId) {
            editingScene = sceneId;
            const scene = scenes[sceneId];
            
            // Show edit form
            document.getElementById('editForm').classList.remove('hidden');
            document.getElementById('editingSceneName').textContent = sceneId;
            
            // Populate form
            document.getElementById('editTitle').value = scene.title;
            document.getElementById('editImage').value = scene.image;
            document.getElementById('editText').value = scene.text;
            
            // Show/hide historical note field
            const historicalGroup = document.getElementById('historicalNoteGroup');
            const historicalNote = document.getElementById('editHistoricalNote');
            if (scene.historicalNote !== undefined) {
                historicalGroup.classList.remove('hidden');
                historicalNote.value = scene.historicalNote || '';
            } else {
                historicalGroup.classList.add('hidden');
            }
            
            // Show/hide choices editor
            const choicesGroup = document.getElementById('choicesGroup');
            const choicesEditor = document.getElementById('choicesEditor');
            if (scene.choices && scene.choices.length > 0) {
                choicesGroup.classList.remove('hidden');
                renderChoicesEditor(scene.choices);
            } else {
                choicesGroup.classList.add('hidden');
            }
            
            // Scroll to form
            document.getElementById('editForm').scrollIntoView({ behavior: 'smooth' });
        }

        function renderChoicesEditor(choices) {
            const editor = document.getElementById('choicesEditor');
            editor.innerHTML = '';
            
            choices.forEach((choice, index) => {
                const choiceDiv = document.createElement('div');
                choiceDiv.style.marginBottom = '10px';
                choiceDiv.innerHTML = `
                    <label style="font-size: 0.9rem; margin-bottom: 3px; display: block;">Button ${index + 1}:</label>
                    <input type="text" 
                           value="${choice.text}" 
                           id="choice${index}" 
                           style="width: 100%; padding: 6px; border: 1px solid #4b5563; border-radius: 4px; background: rgba(0,0,0,0.3); color: white; box-sizing: border-box;">
                `;
                editor.appendChild(choiceDiv);
            });
        }

        function saveScene() {
            if (!editingScene) return;
            
            // Get form values
            const title = document.getElementById('editTitle').value.trim();
            const image = document.getElementById('editImage').value.trim();
            const text = document.getElementById('editText').value.trim();
            const historicalNote = document.getElementById('editHistoricalNote').value.trim();
            
            if (!title || !text) {
                alert('Title and text are required!');
                return;
            }
            
            // Update scene
            scenes[editingScene].title = title;
            scenes[editingScene].image = image;
            scenes[editingScene].text = text;
            
            if (scenes[editingScene].historicalNote !== undefined) {
                scenes[editingScene].historicalNote = historicalNote;
            }
            
            // Update choice button texts if they exist
            if (scenes[editingScene].choices) {
                scenes[editingScene].choices.forEach((choice, index) => {
                    const choiceInput = document.getElementById(`choice${index}`);
                    if (choiceInput) {
                        choice.text = choiceInput.value.trim();
                    }
                });
            }
            
            // Update current scene if we're editing it
            if (currentScene === editingScene) {
                updateScene();
            }
            
            // Refresh grid and hide form
            renderSceneGrid();
            cancelEdit();
            
            alert('Scene updated successfully!');
        }

        function cancelEdit() {
            editingScene = null;
            document.getElementById('editForm').classList.add('hidden');
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', function() {
            updateScene();
            
            // Add enter key support for name input
            document.getElementById('playerName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startGame();
                }
            });

            // Add enter key support for password input
            document.getElementById('passwordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });
        });
    </script>
</body>
</html>
            